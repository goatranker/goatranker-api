const data = {
    "_id": "5efacbf11230cdae12fc0b79",
    "name": "edm",
    "userVotes": [
        {
            "_id": "5efacbf11230cdae12fc0b7a",
            "artistId": "2CIMQHirSU0MQqyYHq0eOx",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "deadmau5"
        },
        {
            "_id": "5efacbfb1230cdae12fc0b7c",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc021230cdae12fc0b7d",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc071230cdae12fc0b7e",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc121230cdae12fc0b81",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc161230cdae12fc0b82",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc231230cdae12fc0b84",
            "artistId": "77AiFEVeAVj2ORpC85QVJs",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Steve Aoki"
        },
        {
            "_id": "5efacc281230cdae12fc0b85",
            "artistId": "77AiFEVeAVj2ORpC85QVJs",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Steve Aoki"
        },
        {
            "_id": "5efacc421230cdae12fc0b87",
            "artistId": "7CajNmpbOovFoOoasH2HaY",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Calvin Harris"
        },
        {
            "_id": "5efacc491230cdae12fc0b88",
            "artistId": "7CajNmpbOovFoOoasH2HaY",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Calvin Harris"
        },
        {
            "_id": "5efacc4e1230cdae12fc0b89",
            "artistId": "7CajNmpbOovFoOoasH2HaY",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Calvin Harris"
        },
        {
            "_id": "5efacc531230cdae12fc0b8a",
            "artistId": "7CajNmpbOovFoOoasH2HaY",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Calvin Harris"
        },
        {
            "_id": "5efacc841230cdae12fc0b8b",
            "artistId": "5he5w2lnU9x7JFhnwcekXX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Skrillex"
        },
        {
            "_id": "5efacc9b1230cdae12fc0b8d",
            "artistId": "1N9n8MSxrr4Emhb566493b",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Morgan Page"
        },
        {
            "_id": "5efacc9f1230cdae12fc0b8e",
            "artistId": "1N9n8MSxrr4Emhb566493b",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Morgan Page"
        },
        {
            "_id": "5efacca31230cdae12fc0b8f",
            "artistId": "1N9n8MSxrr4Emhb566493b",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Morgan Page"
        },
        {
            "_id": "5efacca81230cdae12fc0b92",
            "artistId": "1N9n8MSxrr4Emhb566493b",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Morgan Page"
        },
        {
            "_id": "5efaccb31230cdae12fc0b94",
            "artistId": "4pb4rqWSoGUgxm63xmJ8xc",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Madeon"
        },
        {
            "_id": "5efaccb81230cdae12fc0b95",
            "artistId": "4pb4rqWSoGUgxm63xmJ8xc",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Madeon"
        },
        {
            "_id": "5efaccbb1230cdae12fc0b96",
            "artistId": "4pb4rqWSoGUgxm63xmJ8xc",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Madeon"
        },
        {
            "_id": "5efacd1e1230cdae12fc0b97",
            "artistId": "1N9n8MSxrr4Emhb566493b",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Morgan Page"
        },
        {
            "_id": "5efacd7e1230cdae12fc0b99",
            "artistId": "5fMUXHkw8R8eOP2RNVYEZX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Diplo"
        },
        {
            "_id": "5efacd821230cdae12fc0b9a",
            "artistId": "5fMUXHkw8R8eOP2RNVYEZX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Diplo"
        },
        {
            "_id": "5efacd851230cdae12fc0b9b",
            "artistId": "5fMUXHkw8R8eOP2RNVYEZX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Diplo"
        },
        {
            "_id": "5efacd881230cdae12fc0b9c",
            "artistId": "5fMUXHkw8R8eOP2RNVYEZX",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Diplo"
        },
        {
            "_id": "5efacda01230cdae12fc0b9e",
            "artistId": "1vCWHaC5f2uS3yhpwWbIA6",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Avicii"
        },
        {
            "_id": "5efacda31230cdae12fc0b9f",
            "artistId": "1vCWHaC5f2uS3yhpwWbIA6",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Avicii"
        },
        {
            "_id": "5efacda71230cdae12fc0ba0",
            "artistId": "1vCWHaC5f2uS3yhpwWbIA6",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Avicii"
        },
        {
            "_id": "5efacdaa1230cdae12fc0ba1",
            "artistId": "1vCWHaC5f2uS3yhpwWbIA6",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Avicii"
        },
        {
            "_id": "5efacdf31230cdae12fc0ba3",
            "artistId": "540vIaP2JwjQb9dm3aArA4",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "DJ Snake"
        },
        {
            "_id": "5efacdf71230cdae12fc0ba4",
            "artistId": "540vIaP2JwjQb9dm3aArA4",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "DJ Snake"
        },
        {
            "_id": "5efacdfa1230cdae12fc0ba5",
            "artistId": "540vIaP2JwjQb9dm3aArA4",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "DJ Snake"
        },
        {
            "_id": "5eface051230cdae12fc0ba7",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface091230cdae12fc0ba8",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface0c1230cdae12fc0ba9",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface0f1230cdae12fc0baa",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface121230cdae12fc0bab",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface191230cdae12fc0bae",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface1c1230cdae12fc0baf",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface201230cdae12fc0bb0",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface241230cdae12fc0bb1",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface301230cdae12fc0bb2",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface341230cdae12fc0bb3",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        },
        {
            "_id": "5eface3d1230cdae12fc0bb5",
            "artistId": "6fcTRFpz0yH79qSKfof7lp",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Seven Lions"
        },
        {
            "_id": "5eface401230cdae12fc0bb6",
            "artistId": "6fcTRFpz0yH79qSKfof7lp",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Seven Lions"
        },
        {
            "_id": "5eface431230cdae12fc0bb7",
            "artistId": "6fcTRFpz0yH79qSKfof7lp",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Seven Lions"
        },
        {
            "_id": "5eface461230cdae12fc0bb8",
            "artistId": "6fcTRFpz0yH79qSKfof7lp",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Seven Lions"
        },
        {
            "_id": "5eface491230cdae12fc0bb9",
            "artistId": "6fcTRFpz0yH79qSKfof7lp",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Seven Lions"
        },
        {
            "_id": "5eface551230cdae12fc0bba",
            "artistId": "2CIMQHirSU0MQqyYHq0eOx",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "deadmau5"
        },
        {
            "_id": "5eface581230cdae12fc0bbb",
            "artistId": "2CIMQHirSU0MQqyYHq0eOx",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "deadmau5"
        },
        {
            "_id": "5eface8d1230cdae12fc0bbc",
            "artistId": "10gzBoINW3cLJfZUka8Zoe",
            "user_id": "5efac9f11230cdae12fc0b6c",
            "artistName": "Above & Beyond"
        }
    ],
    "createdAt": "2020-06-30T05:21:53.539Z",
    "updatedAt": "2020-06-30T05:33:01.574Z",
    "__v": 0
}

const ranker = (array) => {
    let temp = []
    let tempId = []
    array.map((item, index) => {
        temp.push(item.artistName)
        tempId.push(item.artistId)
    })
// sort by name
    temp.sort(function(a, b) {
        var nameA = a.toUpperCase(); // ignore upper and lowercase
        var nameB = b.toUpperCase(); // ignore upper and lowercase
        if (nameA < nameB) {
        return -1;
        }
        if (nameA > nameB) {
        return 1;
        }
    
        // names must be equal
        return 0;
    });
    tempId.sort(function(a, b) {
        var nameA = a.toUpperCase(); // ignore upper and lowercase
        var nameB = b.toUpperCase(); // ignore upper and lowercase
        if (nameA < nameB) {
        return -1;
        }
        if (nameA > nameB) {
        return 1;
        }
    
        // names must be equal
        return 0;
    });
    return {names: temp, id_all: tempId}
}

    const goatRanker = (array, results) => {
            let tempArr = ranker(array)
            let votes = [];
            let count = 1;
            let goats = [];
            for (let i = 0; i < tempArr.names.length; i++) {
                if (tempArr.names[i] === tempArr.names[i + 1]) {
                    count++;
                } else {
                    let value = {
                        id: `${tempArr.names[i]}`,
                        artistId: `${tempArr.id_all[i]}`,
                        rank: count
                    };
                    votes = [...votes, value];
                    count = 1;
                }
            }
            const compare = (a, b) => {
                const ArtistOne = a.rank;
                const ArtistTwo = b.rank;
        
                let comparison = 0;
                if (ArtistOne > ArtistTwo) {
                    comparison = 1;
                } else if (ArtistOne < ArtistTwo) {
                    comparison = -1;
                }
                return comparison * -1;
            };

            return votes.sort(compare).splice(0, results || 1)
        };
module.exports = goatRanker;


// console.log(goatRanker(data.userVotes, 5));
// console.log(ranker(data.userVotes));














































// const ranker = (votes) => {
//     let rankRaw = [];
//     let staged = [];
//     votes.map((artist, index) => {
//         rankRaw.push(artist.userVotes);
//     });
//     for (let i = 0; i < rankRaw.length; i++) {
//         const item = rankRaw[i];
//         staged.push(item[0].artistId);
//     }
//     let sorted = staged.sort();

//     return sorted;
// };



// const goatRanker = (array, results) => {
//     let tempArr = ranker(array)
//     let votes = [];
//     let count = 1;
//     let goats = [];
//     for (let i = 0; i < tempArr.length; i++) {
//         if (tempArr[i] === tempArr[i + 1]) {
//             count++;
//         } else {
//             let value = {
//                 id: `${tempArr[i]}`,
//                 rank: count
//             };
//             votes = [...votes, value];
//             count = 1;
//         }
//     }
//     const compare = (a, b) => {
//         const ArtistOne = a.rank;
//         const ArtistTwo = b.rank;

//         let comparison = 0;
//         if (ArtistOne > ArtistTwo) {
//             comparison = 1;
//         } else if (ArtistOne < ArtistTwo) {
//             comparison = -1;
//         }
//         return comparison * -1;
//     };

//     return votes.sort(compare).splice(0, results);
// };

// module.exports = goatRanker